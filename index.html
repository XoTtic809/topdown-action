<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="description" content="Fast-paced top-down shooter with boss fights, power-ups, and wave-based progression. Built with pure JavaScript!" />
<meta name="author" content="Ethan" />
<title>Topdown Action â€” Enhanced Edition</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="ui">

  <!-- â”€â”€â”€ GAME HUD â”€â”€â”€ -->
  <div id="topbar">
    <div id="score">Score: <span id="scoreVal">0</span></div>
    <div id="hp">HP: <span id="hpVal">100</span></div>
    <div id="wave">Wave: <span id="waveVal">1</span></div>
    <div id="coinsHUD">ğŸª™ 0</div>
  </div>

  <div id="abilities">
    <div id="dashAbility" class="ability" title="Dash (SPACE)">
      <div class="ability-icon">âš¡</div>
      <div class="ability-cooldown"></div>
      <div class="ability-timer"></div>
      <div class="ability-key">SPC</div>
    </div>
  </div>

  <div id="buffsDisplay"></div>

  <div id="combo" class="hidden"><span id="comboVal">0</span>x COMBO!</div>
  <div id="scorePopups"></div>
  <div id="waveAnnouncement" class="hidden">WAVE 1</div>

  <!-- â”€â”€â”€ CANVAS â”€â”€â”€ -->
  <canvas id="game"></canvas>

  <!-- â”€â”€â”€ HOME SCREEN â”€â”€â”€ -->
  <div id="homeScreen">
    <div class="home-scanlines"></div>
    <div class="home-glow"></div>
    <div class="home-content">
      <div class="home-title-wrap">
        <h1 class="home-title">TOPDOWN</h1>
        <h1 class="home-title accent">ACTION</h1>
        <p class="home-sub">Survive Â· Upgrade Â· Dominate</p>
      </div>
      <div id="gameOverMsg" class="hidden game-over-banner">
        â˜  GAME OVER &nbsp;Â·&nbsp; Score: <span id="finalScore">0</span>
      </div>
      <div class="home-btn-group">
        <button id="startBtn" class="home-btn primary">â–¶ &nbsp;START GAME</button>
        <button id="shopBtn"  class="home-btn secondary">ğŸ›’ &nbsp;SHOP</button>
        <button id="leaderboardBtn" class="home-btn secondary hidden">ğŸ† &nbsp;LEADERBOARD</button>
        <button id="settingsBtn" class="home-btn secondary">âš™ &nbsp;SETTINGS</button>
      </div>
      <div id="userStatus" class="user-status hidden">
        <div class="user-info">
          <span class="user-icon">ğŸ‘¤</span>
          <span id="usernameDisplay" class="username">Guest</span>
        </div>
        <button id="logoutBtn" class="logout-btn">LOGOUT</button>
        <button id="adminBtn" class="home-btn danger hidden">âš ï¸ ADMIN</button>
      </div>
      <div class="home-footer">
        <div class="home-stat">ğŸ† Best: <strong id="homeHighVal">0</strong></div>
        <div class="home-stat">ğŸª™ Coins: <strong id="homeCoinsVal">0</strong></div>
      </div>
      <div class="home-controls">
        <strong>Controls</strong>
        <span>WASD / Arrows â€” Move</span>
        <span>Mouse â€” Aim &amp; Shoot</span>
        <span>SPACE â€” Dash (invincible!)</span>
        <span>ESC â€” Pause</span>
      </div>
    </div>
  </div>

  <!-- â”€â”€â”€ SETTINGS PANEL â”€â”€â”€ -->
  <div id="settingsPanel" class="hidden panel-overlay">
    <div class="panel-box">
      <h2 class="panel-title">âš™ SETTINGS</h2>
      <div class="settings-list">
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">ğŸ”Š</span>
            <div><div class="setting-name">Master Sound</div><div class="setting-desc">All game audio on/off</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="masterSoundToggle" checked><span class="slider"></span></label>
        </div>
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">ğŸ”«</span>
            <div><div class="setting-name">Shoot Sound</div><div class="setting-desc">Player shooting sound only</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="shootSoundToggle" checked><span class="slider"></span></label>
        </div>
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">ğŸ“³</span>
            <div><div class="setting-name">Screen Shake</div><div class="setting-desc">Camera shake on damage</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="screenShakeToggle" checked><span class="slider"></span></label>
        </div>
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">âœ¨</span>
            <div><div class="setting-name">Particles</div><div class="setting-desc">Explosion effects</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="particlesToggle" checked><span class="slider"></span></label>
        </div>
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">ğŸ“Š</span>
            <div><div class="setting-name">Show FPS</div><div class="setting-desc">Frames-per-second counter</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="showFPSToggle"><span class="slider"></span></label>
        </div>
        <div class="setting-row">
          <div class="setting-label">
            <span class="setting-icon">ğŸ¯</span>
            <div><div class="setting-name">Auto-Shoot</div><div class="setting-desc">Automatically fire (for trackpads)</div></div>
          </div>
          <label class="toggle"><input type="checkbox" id="autoShootToggle"><span class="slider"></span></label>
        </div>
      </div>
      <button class="panel-back-btn" id="settingsBackBtn">â† BACK</button>
    </div>
  </div>

  <!-- â”€â”€â”€ SHOP PANEL â”€â”€â”€ -->
  <div id="shopPanel" class="hidden panel-overlay">
    <div class="panel-box shop-box">
      <h2 class="panel-title">ğŸ›’ SHOP</h2>
      <div class="shop-coins-bar">ğŸª™ <span id="shopCoinsVal">0</span> coins available</div>
      <p class="shop-hint">Earn coins by killing enemies and clearing waves</p>
      <div id="skinGrid" class="skin-grid"></div>
      <button class="panel-back-btn" id="shopBackBtn">â† BACK</button>
    </div>
  </div>

  <!-- â”€â”€â”€ PAUSE OVERLAY â”€â”€â”€ -->
  <div id="pauseOverlay" class="hidden panel-overlay">
    <div class="panel-box pause-box">
      <h2 class="panel-title">â¸ PAUSED</h2>
      <div class="pause-buttons">
        <button class="home-btn primary"    id="resumeBtn">â–¶ RESUME</button>
        <button class="home-btn secondary"  id="pauseSettingsBtn">âš™ SETTINGS</button>
        <button class="home-btn danger"     id="menuBtn">âŒ‚ MAIN MENU</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€â”€ LOGIN/SIGNUP MODAL â”€â”€â”€ -->
  <div id="authModal" class="panel-overlay">
    <div class="panel-box auth-box">
      <h2 class="panel-title">ğŸ” AUTHENTICATION</h2>
      <div id="authTabs" class="auth-tabs">
        <button class="auth-tab active" data-tab="login">LOGIN</button>
        <button class="auth-tab" data-tab="signup">SIGN UP</button>
      </div>
      
      <!-- Login Form -->
      <div id="loginForm" class="auth-form">
        <input type="email" id="loginEmail" placeholder="Email" class="auth-input">
        <input type="password" id="loginPassword" placeholder="Password" class="auth-input">
        <button id="loginBtn" class="home-btn primary">ğŸ”‘ LOGIN</button>
        <div id="loginError" class="auth-error hidden"></div>
      </div>
      
      <!-- Signup Form -->
      <div id="signupForm" class="auth-form hidden">
        <input type="text" id="signupUsername" placeholder="Username (display name)" class="auth-input">
        <input type="email" id="signupEmail" placeholder="Email" class="auth-input">
        <input type="password" id="signupPassword" placeholder="Password (min 6 characters)" class="auth-input">
        <button id="signupBtn" class="home-btn primary">âœ¨ CREATE ACCOUNT</button>
        <div id="signupError" class="auth-error hidden"></div>
      </div>
      
      <button id="playGuestBtn" class="home-btn secondary">ğŸ‘¤ PLAY AS GUEST</button>
      <p class="auth-note">Guest mode: No save data, no leaderboard access</p>
    </div>
  </div>

  <!-- â”€â”€â”€ LEADERBOARD PANEL â”€â”€â”€ -->
  <div id="leaderboardPanel" class="hidden panel-overlay">
    <div class="panel-box leaderboard-box">
      <h2 class="panel-title">ğŸ† LEADERBOARD</h2>
      <div class="leaderboard-filters">
        <button class="filter-btn active" data-filter="allTime">All Time</button>
        <button class="filter-btn" data-filter="today">Today</button>
        <button class="filter-btn" data-filter="week">This Week</button>
      </div>
      <div id="leaderboardList" class="leaderboard-list">
        <div class="loading-spinner">Loading...</div>
      </div>
      <button class="panel-back-btn" id="leaderboardBackBtn">â† BACK</button>
    </div>
  </div>

  <!-- â”€â”€â”€ ADMIN PANEL â”€â”€â”€ -->
  <div id="adminPanel" class="hidden panel-overlay">
    <div class="panel-box admin-box">
      <h2 class="panel-title">âš ï¸ ADMIN PANEL</h2>

      <!-- Tab bar -->
      <div class="admin-tabs">
        <button class="admin-tab active" data-tab="ban">ğŸš« Bans</button>
        <button class="admin-tab" data-tab="users">ğŸ‘¥ Users</button>
        <button class="admin-tab" data-tab="scores">ğŸ† Scores</button>
        <button class="admin-tab" data-tab="logs">ğŸ“‹ Logs</button>
      </div>

      <!-- Global message bar -->
      <div id="adminMessage" class="admin-message hidden"></div>

      <!-- â”€â”€ BAN TAB â”€â”€ -->
      <div id="adminTab-ban" class="admin-tab-content">
        <div class="admin-section">
          <h3 class="admin-subtitle">Ban User by ID</h3>
          <input type="text" id="banUserId" placeholder="User ID" class="auth-input">
          <input type="text" id="banReason" placeholder="Reason (optional)" class="auth-input">
          <button id="banUserBtn" class="home-btn danger">ğŸš« BAN USER</button>
        </div>
        <div class="admin-section">
          <h3 class="admin-subtitle">Banned Users</h3>
          <div id="bannedUsersList" class="banned-list">
            <div class="loading-spinner">Loading...</div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ USERS TAB â”€â”€ -->
      <div id="adminTab-users" class="admin-tab-content hidden">
        <div class="admin-section">
          <h3 class="admin-subtitle">All Registered Users</h3>
          <div id="usersList" class="admin-scroll-list">
            <div class="loading-spinner">Loading...</div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ SCORES TAB â”€â”€ -->
      <div id="adminTab-scores" class="admin-tab-content hidden">
        <div class="admin-section">
          <h3 class="admin-subtitle">Leaderboard â€” Delete Scores</h3>
          <div id="scoresAdminList" class="admin-scroll-list">
            <div class="loading-spinner">Loading...</div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ LOGS TAB â”€â”€ -->
      <div id="adminTab-logs" class="admin-tab-content hidden">
        <div class="admin-section">
          <h3 class="admin-subtitle">Recent Activity (last 50)</h3>
          <div id="activityLogsList" class="admin-scroll-list">
            <div class="loading-spinner">Loading...</div>
          </div>
        </div>
      </div>

      <button class="panel-back-btn" id="adminBackBtn">â† BACK</button>
    </div>
  </div>

</div>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
<script src="firebase-auth.js"></script>
<script src="firebase-ui.js"></script>
<script src="game.js"></script>
</body>
</html>